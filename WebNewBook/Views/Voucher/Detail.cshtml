@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";


    var lstvoucherCT = ViewBag.lstvoucherCT;
}
@using WebNewBook.ViewModel
@model VoucherModel
<div>

    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <button class="nav-link active" id="nav-add-tab"
                    data-bs-toggle="tab" data-bs-target="#nav-add"
                    type="button" role="tab" aria-controls="nav-add"
                    aria-selected="true">
                Thêm Voucher
            </button>
            <button class="nav-link" id="nav-list-tab"
                    data-bs-toggle="tab" data-bs-target="#nav-list"
                    type="button" role="tab" aria-controls="nav-list"
                    aria-selected="false">
                Danh sách Voucher phát hành
            </button>
            <button class="nav-link" id="nav-history-tab"
                    data-bs-toggle="tab" data-bs-target="#nav-history"
                    type="button" role="tab" aria-controls="nav-history"
                    aria-selected="false">
                Lịch sử Voucher
            </button>
        </div>
    </nav>
    <div class="tab-content" id="nav">
        <div class="tab-pane fade show active my-3" id="nav-add"
             role="tabpanel" aria-labelledby="nav-add-tab">
            <div class="row my-3 ">
                <button type="button" style="font-size: 13px;" class="btn btn-success col-2 mx-1" data-bs-toggle="modal" data-bs-target="#voucher">
                    <i class="fa-solid fa-plus"></i> Voucher
                </button>
                <div class="modal fade" id="voucher" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">Thêm voucher</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <form asp-action="Create">
                                <input asp-for="Voucher.Id" type="hidden" />
                                <input asp-for="Voucher.EndDate" type="hidden" />
                                <div class="modal-body">
                                    <div class="mb-3 row">
                                        <label for="" class="col-sm-3 col-form-label">Mã voucher</label>
                                        <div class="col-sm-9">
                                            <input asp-for="voucherCT.NgayHetHan  " type="hidden" value="@Model.Voucher.EndDate" />
                                            <input asp-for="voucherCT.MaVoucher" type="hidden" value="@Model.Voucher.Id" />
                                            <input asp-for="voucherCT.Id" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Thêm Voucher</button>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
                <button style="font-size: 13px;" class="btn btn-success col-3 mx-1" data-bs-toggle="modal" data-bs-target="#List_voucher">
                    <i class="fa-solid fa-plus"></i> Danh sách voucher
                </button>
                <!-- Modal -->
                <div class="modal fade" id="List_voucher" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="staticBackdropLabel">Thêm danh sách voucher</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <form asp-action="CreateListvoucher">
                                <input name="maVoucher" type="hidden" value="@Model.Voucher.Id" />
                                <div class="modal-body">
                                    <div class="form-floating mb-3">
                                        <input name="sizeVoucher" type="number" class="form-control" id="Dodai" placeholder="Độ dài mã voucher">
                                        <label for="Dodai">Độ dài mã voucher</label>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input name="startTextVoucher" type="text" class="form-control" id="ktstart" placeholder="Kí tự bắt đầu">
                                        <label for="ktstart">Kí tự bắt đầu</label>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input name="endTextVoucher" type="text" class="form-control" id="ktend" placeholder="Kí tự kết thúc">
                                        <label for="ktend">Kí tự kết thúc</label>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input name="quantityVoucher" type="number" class="form-control" id="quantity" placeholder="Số lượng voucher">
                                        <label for="quantity">Số lượng voucher</label>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                                    <button type="submit" class="btn btn-primary">Thêm</button>
                                </div>
                            </form>
                           
                        </div>
                    </div>
                </div>



                <button style="font-size: 13px;" class="btn btn-success col-2 mx-1" data-bs-toggle="modal" data-bs-target="#import_ex">
                    <i class="fa-solid fa-folder-open"></i> import
                </button>
                <!-- Modal -->
                <div class="modal fade" id="import_ex" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="staticBackdropLabel">Nhập Voucher từ file dữ liệu</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <p> Tải file mẫu về (<a asp-controller="Voucher" asp-action="dowloadFilemau">Excer file </a>)</p>
                            <form asp-action="CreateImPortExcel" method="post" enctype="multipart/form-data">
                                <div class="modal-body">
                                   
                                    <input  type="file" name="file" />
                                    <input name="maPhathanh" type="hidden" value="@Model.Voucher.Id" />
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary"> Import </button>
                                </div>
                            </form>
                            
                        </div>
                    </div>
                </div>

            </div>
            <table class="table table-striped  table-hover">
                <thead>
                    <tr>
                        <th>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                            </div>
                        </th>
                        <th>Mã Voucher</th>
                        <th>Người sử dụng</th>
                        <th>Ngày phát hành</th>
                        <th>Ngày hết hạn</th>
                        <th>Ngày sử dụng</th>
                        <th>Điểm đổi</th>
                        <th>Trạng thái</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var x in lstvoucherCT)
                    {
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                </div>
                            </td>
                            <td>@x.Id</td>
                            <td></td>
                            @if (x.NgayBatDau != null)
                            {
                                <td>@x.NgayBatDau.ToString("d/M/yyyy")</td>
                            }
                            else
                            {
                                <td></td>
                            }
                            @if (x.NgayHetHan != null)
                            {
                                <td>@x.NgayHetHan.ToString("d/M/yyyy")</td>
                            }
                            else
                            {
                                <td></td>
                            }

                            @if (x.NgaySuDung != null)
                            {
                                <td>@x.NgaySuDung.ToString("d/M/yyyy")</td>
                            }
                            else
                            {
                                <td></td>
                            }

                            <td>@x.Diemdoi</td>
                            @*    <td>@(x.TrangThai==0?"Chưa phát Hành": "Đã phát hành")</td>*@
                            @if (@x.TrangThai == 0)
                            {
                                <td class="text-danger fs-6 fst-italic">Chưa Phát hành</td>
                            }
                            else
                            {
                                <td class="text-success fs-6 fst-italic">Đã Phát hành</td>
                            }
                        </tr>
                    }



                </tbody>
            </table>
        </div>
        <div class="tab-pane fade  active" id="nav-list" role="tabpanel"
             aria-labelledby="nav-list-tab">

            <div style="padding: 30px;">
                <form action="" class="row">
                    <div class="col-5 mb-3">
                        <input type="text" class="form-control"
                               placeholder="Tìm kiếm mã voucher">
                    </div>
                    <div class="col-5 mb-3">
                        <select class="form-select"
                                aria-label="Default select example">
                            <option selected>Tất cả</option>
                            <option value="1">Đã phát hành</option>
                            <option value="0">Chưa phát hành</option>
                            <option value="2">Đã Sửa dụng</option>
                            <option value="3">Chưa sử dụng</option>

                        </select>
                    </div>
                    <div class="col-2">
                        <button type="submit" class="btn btn-secondary">
                            Tìm
                            kiếm
                        </button>
                    </div>
                </form>
                <table class="table table-striped  table-hover">
                    <thead>
                        <tr>
                            <th>Mã Voucher</th>
                            <th>Người sử dụng</th>
                            <th>Ngày phát hành</th>
                            <th>Ngày hết hạn</th>
                            <th>Ngày sử dụng</th>
                            <th>Điểm đổi</th>
                            <th>Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr>
                            <td>1223</td>
                            <td>1223</td>
                            <td>1223</td>
                            <td>1223</td>
                            <td>1223</td>
                            <td>1223</td>
                            <td>1223</td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
        <div class="tab-pane fade  active " id="nav-history" role="tabpanel"
             aria-labelledby="nav-history-tab">
        </div>
    </div>
</div>
